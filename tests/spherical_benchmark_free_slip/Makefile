input:
	N=0; for i in A B C D E; do \
	  python icosahedral_gmsh.py icosahedron_$${i} 2.22 $${N}; N=$$(($${N}+1)); \
	  sed "s/_TEMPLATE/_$${i}/" spherical_template.flml > spherical_$${i}.flml; \
	done
	spud-set spherical_A.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::UpperMantle/regions::WholeMesh/sizing_function/constant" 0.125
	spud-set spherical_A.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::LowerMantle/regions::WholeMesh/sizing_function/constant" 0.125
	spud-set spherical_B.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::UpperMantle/regions::WholeMesh/sizing_function/constant" 0.0625
	spud-set spherical_B.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::LowerMantle/regions::WholeMesh/sizing_function/constant" 0.0625
	spud-set spherical_C.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::UpperMantle/regions::WholeMesh/sizing_function/constant" 0.03125
	spud-set spherical_C.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::LowerMantle/regions::WholeMesh/sizing_function/constant" 0.03125
	spud-set spherical_D.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::UpperMantle/regions::WholeMesh/sizing_function/constant" 0.015625
	spud-set spherical_D.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::LowerMantle/regions::WholeMesh/sizing_function/constant" 0.015625
	spud-set spherical_E.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::UpperMantle/regions::WholeMesh/sizing_function/constant" 0.0078125
	spud-set spherical_E.flml "/geometry/mesh::ExtrudedMesh/from_mesh/extrude/layer::LowerMantle/regions::WholeMesh/sizing_function/constant" 0.0078125



clean:
	rm -rf spherical_[A-Z].*
	rm -rf fluidity.* *.msh *.vtu
	rm -rf matrixdump*
